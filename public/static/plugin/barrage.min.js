$.fn.barrage=function(opt){var _self=$(this);var opts={data:[],row:5,time:2000,gap:20,position:'fixed',direction:'bottom right',ismoseoverclose:true,height:30,};var settings=$.extend({},opts,opt);var M={},Obj={};Obj.data=settings.data;M.vertical=settings.direction.split(/\s+/)[0];M.horizontal=settings.direction.split(/\s+/)[1];M.bgColors=['rgba(0,0,0,.0)'];Obj.arrEle=[];M.barrageBox=$('<div id="lcms-barrage"></div>');M.timer=null;var createView=function(){var randomIndex=Math.floor(Math.random()*M.bgColors.length);var ele=$('<div class="lcms-barrage-content" style="display:flex;height:0;opacity:0;text-align:'+settings.direction.split(/\s+/)[1]+';float:'+settings.direction.split(/\s+/)[1]+'; background-color:'+M.bgColors[randomIndex]+'"; >'+(Obj.data[0].content?Obj.data[0].content:"")+'</div>');var str=Obj.data.shift();if(M.vertical=='top'){ele.animate({'opacity':1,'margin-top':settings.gap,'height':settings.height,'line-height':settings.height+'px',},1000);M.barrageBox.prepend(ele)}else{ele.animate({'opacity':1,'margin-bottom':settings.gap,'height':settings.height,'line-height':settings.height+'px'},1000);M.barrageBox.append(ele)};Obj.data.push(str);if(M.barrageBox.children().length>settings.row){M.barrageBox.children().eq(0).animate({'opacity':0,},300,function(){$(this).css({'margin':0,}).remove()})}};M.mouseClose=function(){settings.ismoseoverclose&&(function(){M.barrageBox.mouseover(function(){clearInterval(M.timer);M.timer=null}).mouseout(function(){M.timer=setInterval(function(){createView()},settings.time)})})()};Obj.close=function(){M.barrageBox.remove();clearInterval(M.timer);M.timer=null};Obj.start=function(){if(M.timer)return;_self.append(M.barrageBox);createView();M.timer=setInterval(function(){createView()},settings.time);M.mouseClose()};return Obj}