layui.config({version:LCMS.config.ver,base:LCMS['url']['static']+'layui/exts/'}).extend({notice:'notice/notice'});layui.link(LCMS['url']['public']+'static/layui/exts/notice/notice.css?v='+layui.cache.version);var $=jQuery=layui.$,LBOX=$('#LBOX'),LCONTENT=$('#LCONTENT'),LJS;layui.use(['notice'],function(){layui.notice.options={positionClass:'toast-top-center',closeButton:true,debug:false,timeOut:"3000",showDuration:"0",hideDuration:"0",showEasing:"linear"};typeof Notification!='undefined'&&Notification.requestPermission();LJS={_echo:function(content){console.log(content)},_loadstart:function(){var index=layer.load(2,{shade:[0.3,'#fff']});return index},_loadend:function(index){layer.close(index)},_tips:function(msg,type){if(type===0){layui.notice.error(msg);LJS._audio(LCMS.url.public+'ui/admin/static/audio/error.mp3?'+LCMS['config']['ver'])}else{layui.notice.success(msg);LJS._audio(LCMS.url.public+'ui/admin/static/audio/success.mp3?'+LCMS['config']['ver'])}},_tips_desk:function(msg,title){layui.notice.desktopInfo(msg,title)},_get:function(url,callback,type){url=url.indexOf("?")!=-1?url+'&'+Math.random():url+'?'+Math.random();$.ajax({url:url,dataType:type?type:'html',cache:false,timeout:15000,success:function(res){(callback&&typeof(callback)==="function")&&callback(res)},error:function(){LJS._tips('数据加载失败！',0)},complete:function(){layer.closeAll()}})},_post:function(url,data,callback,type){var loading=LJS._loadstart();$.ajax({url:url,data:data,type:'POST',dataType:type?type:'json',cache:false,timeout:15000,success:function(res){(callback&&typeof(callback)==="function")&&callback(res)},error:function(){LJS._tips('数据加载失败！',0)},complete:function(){layer.closeAll();LJS._loadend(loading)}})},_getjs:function(url,next,asy){$.ajaxSetup({async:!asy?true:false,cache:true});url=url.search('://')!=-1?url:LCMS['url']['public']+'ui/admin/static/mod/'+url;if(next){if(next.length>0){$.getScript(url+'?'+LCMS['config']['ver'])}}else{$.getScript(url+'?'+LCMS['config']['ver'])};$.ajaxSetup({async:true,cache:false})},_getcss:function(url){var html='<link rel="stylesheet" href="'+url+'?'+LCMS['config']['ver']+'">';$('head').append(html)},_getQuery:function(name,url){url=url?url:window.location.search;var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)",'i');var result=url.substr(1).match(reg);if(result!=null){return decodeURIComponent(result[2])}else{return null}},_lazydo:function(callback,t){setTimeout(function(){(callback&&typeof(callback)==="function")&&callback()},t?t:1000)},_changeUrl:function(url,arg,arg_val){var pattern=arg+'=([^&]*)';var replaceText=arg+'='+arg_val;if(url.match(pattern)){var tmp='/('+arg+'=)([^&]*)/gi';tmp=url.replace(eval(tmp),replaceText);return tmp}else{if(url.match('[\?]')){return url+'&'+replaceText}else{return url+'?'+replaceText}}return url+'\n'+arg+'\n'+arg_val},_tpl:function(tpl,arr){for(var key in arr){var reg='/{'+key+'}/g';arr[key]=arr[key]?arr[key]:'';tpl=tpl.replace(eval(reg),arr[key])};return tpl},_audio:function(src,loop){var audio=new Audio();audio.src=src;audio.loop=loop==1?1:0;audio.play()},_randstr:function(len){len=len||4;var chars='ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';var str='';for(i=0;i<len;i++){str+=chars.charAt(Math.floor(Math.random()*chars.length))};return str},_iframe:function(url,title,shade){if($(window).width()<768){var area=['100%','100%']}else{var area=['700px','600px']};layer.open({id:'LCMSLAYERIFRAME'+LJS._randstr(4),type:2,title:title?title:' ',content:url,area:area,maxmin:true,resize:true,scrollbar:true,shade:shade?0.3:0,success:function(layero,index){}})},_closeframe:function(reload){var index=parent.layer.getFrameIndex(window.name);parent.layer.close(index);reload=reload?reload:false;if(reload){parent.location.reload()}},_maxframe:function(width){var win_width=parent.document.documentElement.clientWidth;var index=parent.layer.getFrameIndex(window.name);width=width?width:800;if(win_width>width){parent.layer.full(index)}}};LJS._getjs('../fun.js','',1)});