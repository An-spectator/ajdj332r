if($('.lcms-form-tips').length>0){$('.lcms-form-tips').each(function(index){var that=$(this);that.hover(function(){layer.tips(that.attr('data-tips'),$(this),{tips:[1,'#5FB878'],time:0})},function(){layer.close(layer.index)})})};if($('.lcms-form-switch').length>0){layui.form.on('switch(lcms-form-switch)',function(data){var elem=$(data.elem);var url=elem.attr('data-url');if(url){LJS._post(elem.attr('data-url'),{checked:data.elem.checked?1:''},function(res){if(res.code=='1'){LJS._tips(res.msg)}else{LJS._tips(res.msg,0);elem.prop("checked",data.elem.checked?false:true);layui.form.render()}})}})};layui.form.on('submit(lcmsformsubmit)',function(lform){if($('.lcms-form-tags').length>0){$('.lcms-form-tags').each(function(){var ipt=$(this).children('input');lform.field[ipt.attr('name')]=ipt.attr('data-value')})};if($('.lcms-form-checkbox').length>0){$('.lcms-form-checkbox').each(function(){var ipt=$(this).children('input');ipt.each(function(){lform.field[$(this).attr('name')]=lform.field[$(this).attr('name')]?1:0})})};if($('.lcms-form-switch').length>0){$('.lcms-form-switch').each(function(){var ipt=$(this).children('input');lform.field[ipt.attr('name')]=lform.field[ipt.attr('name')]?1:0})};if($('.lcms-form-editor').length>0){$('.lcms-form-editor').each(function(){if(lform.field[$(this).attr('data-name')]==undefined){lform.field[$(this).attr('data-name')]=''}else{lform.field[$(this).attr('data-name')]=$.base64.encode(lform.field[$(this).attr('data-name')].replace(new RegExp(LCMS.url.site+'upload','g'),'../upload'))}})};LJS._post(lform.form.action,lform.field,function(res){if(res.code=='1'){LJS._tips(res.msg);if(res.go){switch(res.go){case'close':LJS._lazydo(function(){LJS._closeframe(true)});break;case'reload':LJS._lazydo(function(){window.location.reload()});break;case'reload-parent':LJS._lazydo(function(){parent.window.location.reload()});break;case'reload-top':LJS._lazydo(function(){top.window.location.reload()});break;default:LJS._lazydo(function(){window.location.href=res.go});break}}}else if(res.code=='2'){LJS._tips(res.msg);LJS._lazydo(function(){eval(res.go)(res.data)})}else{LJS._tips(res.msg,0)}});return false});